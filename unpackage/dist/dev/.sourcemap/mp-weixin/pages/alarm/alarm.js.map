{"version":3,"sources":["uni-app:///main.js","webpack:///E:/code/swms-app/pages/alarm/alarm.vue?c13b","webpack:///E:/code/swms-app/pages/alarm/alarm.vue?84b5","webpack:///E:/code/swms-app/pages/alarm/alarm.vue?92db","webpack:///E:/code/swms-app/pages/alarm/alarm.vue?e703","uni-app:///pages/alarm/alarm.vue","webpack:///E:/code/swms-app/pages/alarm/alarm.vue?15d8","webpack:///E:/code/swms-app/pages/alarm/alarm.vue?456c"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","params","keyword","level","status","category","time","pageNo","pageSize","searchObj","text","on","off","active","id","activeObj","currentSearch","open","listData","showMoreObj","showMore","endTime","firstAlarmId","timer","onPullDownRefresh","onReachBottom","created","destroyed","clearInterval","computed","statusData","value","label","categoryData","levelData","methods","search","type","setTimeout","resolve","res","uni","getPolling","changeSearchObj","item","isQuery","getTime","clearTime","getParams","goto","url","filterTime","filterCategory","filterLevel","filterStatus"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACkM;AAClM,gBAAgB,4MAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,mWAEN;AACP,KAAK;AACL;AACA,aAAa,gZAEN;AACP,KAAK;AACL;AACA,aAAa,0VAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvEA;AAAA;AAAA;AAAA;AAA6vB,CAAgB,0wBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACkGjxB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA;EACAC;IACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAC;QACAC;QACAC;QACAR;QACAS;QACAC;MACA;QACAJ;QACAC;QACAC;QACAR;QACAS;QACAC;MACA;QACAJ;QACAC;QACAC;QACAR;QACAS;QACAC;MACA;QACAJ;QACAC;QACAC;QACAR;QACAS;QACAC;MACA;MACAC;QACAC;QAAA;QACAC;MACA;MAEA;MACAC;MACA;MACAC;QACAC;QACAhB;MACA;MACAiB;MAAA;MACAC;MAAA;MACAC;IACA;EACA;EACA;EACAC;IACA;IACA;EACA;EAEA;EACAC;IACA;IACA;EACA;EAEAC;IACA;IACA;EACA;EACAC;IACAC;EACA;EAEAC;IACAC;MACA;MACA;QACA9B;UACA+B;UACAC;QACA;MACA;MACA;IACA;IACAC;MACA;MACA;QACAjC;UACA+B;UACAC;QACA;MACA;MACA;IACA;IACAE;MACA;MACA;QACAlC;UACA+B;UACAC;QACA;MACA;MACA;IACA;EACA;EAEAG;IACA;AACA;AACA;AACA;IACAC;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAAC;gBAAA,MAEAA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA;gBAAA;cAAA;gBAEA;gBACA;gBAAA;gBAAA,OACA;kBACA;kBACAC;oBACAC;kBACA;gBACA;cAAA;gBAGAtC,mDACA;gBACA;kBAAA,4CACAA;kBACAA;kBACAA;kBACA;gBACA;gBAAA;gBAAA,OAEA;kBACA,IACAD,OACAwC,SADAxC;kBAEA;oBACA;oBACAyC;oBACA;kBAEA;oBACA;oBACAzC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACA0C;MAAA;MACA;QACAd;QACA;MACA;MACA;QACA;UACArB;UACAC;QACA;UACA,IACAR,OACAwC,SADAxC;UAEA;UAEA;YACA;YACA;UACA;UAEA;QACA;MACA;IACA;IACA;IACA2C;MAAA;MACA;MACA;QACA;QACA;MACA;MAEA;MACA;;MAEA;QACA;UACA;YACA;YACA;YACA;YACAC;YACAC;YACA;UACA;UACAD;UACA;QACA;UACAA;QACA;MACA;MACA;MACA;IACA;IACA;IACAE;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;MAEA;IAEA;IACA;IACAC;MACAR;QACAS;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACpWA;AAAA;AAAA;AAAA;AAA47C,CAAgB,64CAAG,EAAC,C;;;;;;;;;;;ACAh9C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/alarm/alarm.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/alarm/alarm.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./alarm.vue?vue&type=template&id=797937aa&scoped=true&\"\nvar renderjs\nimport script from \"./alarm.vue?vue&type=script&lang=js&\"\nexport * from \"./alarm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./alarm.vue?vue&type=style&index=0&id=797937aa&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"797937aa\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/alarm/alarm.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./alarm.vue?vue&type=template&id=797937aa&scoped=true&\"","var components\ntry {\n  components = {\n    uniSearchBar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-search-bar/components/uni-search-bar/uni-search-bar\" */ \"@/uni_modules/uni-search-bar/components/uni-search-bar/uni-search-bar.vue\"\n      )\n    },\n    uniDatetimePicker: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker\" */ \"@/uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.vue\"\n      )\n    },\n    uniLoadMore: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-load-more/components/uni-load-more/uni-load-more\" */ \"@/uni_modules/uni-load-more/components/uni-load-more/uni-load-more.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.listData, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var m0 = _vm.filterCategory(item.category)\n    var m1 = _vm.filterTime(item.verlayTime)\n    var m2 = _vm.filterStatus(item.status)\n    var m3 = _vm.filterLevel(item.level)\n    return {\n      $orig: $orig,\n      m0: m0,\n      m1: m1,\n      m2: m2,\n      m3: m3,\n    }\n  })\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.params.keyword = \"\"\n      _vm.search(\"top\")\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./alarm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./alarm.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class='alarm'>\r\n\t\t<!-- 查询框 -->\r\n\t\t<view class='search'>\r\n\t\t\t<view>\r\n\t\t\t\t<uni-search-bar placeholder='输入关键字查询' cancelButton='none' @confirm=\"search('top')\" :focus=\"false\"\r\n\t\t\t\t\tv-model=\"params.keyword\" @clear=\"params.keyword = '';search('top')\">\r\n\t\t\t\t</uni-search-bar>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"grid-row\">\r\n\t\t\t\t<view class=\"uni-grid\">\r\n\t\t\t\t\t<view @click=\"changeSearchObj(index)\" v-for=\"(item, index) in searchObj\"\r\n\t\t\t\t\t\t:class=\"{'active': item.active}\" class=\"grid-box\" style=\"background-color: #fff;\">\r\n\t\t\t\t\t\t<template v-if=\"item.id == 'time'\">\r\n\t\t\t\t\t\t\t<uni-datetime-picker :end='endTime' type=\"daterange\" @clearTime='clearTime'\r\n\t\t\t\t\t\t\t\t@change=\"getTime\" v-model=\"params.time\">\r\n\t\t\t\t\t\t\t\t<text class=\"text\">{{item.text}}</text>\r\n\t\t\t\t\t\t\t\t<image :src=\"item.status ? item.on : item.off\" mode=\"\"></image>\r\n\t\t\t\t\t\t\t</uni-datetime-picker>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t<text class=\"text\">{{item.text}}</text>\r\n\t\t\t\t\t\t\t<image :src=\"item.status ? item.on : item.off\" mode=\"\"></image>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view :class=\"{open: activeObj.open}\" class=\"grid-drawer\">\r\n\t\t\t\t\t<!-- 告警分类 -->\r\n\t\t\t\t\t<view class=\"grid-drawer-item\" v-show=\"activeObj.currentSearch == 0\">\r\n\t\t\t\t\t\t<view @click=\"getParams('category', item.value)\" v-for='item in categoryData' :key=\"item.value\">\r\n\t\t\t\t\t\t\t{{item.label}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 告警等级 -->\r\n\t\t\t\t\t<view class=\"grid-drawer-item\" v-show=\"activeObj.currentSearch == 1\">\r\n\t\t\t\t\t\t<view @click=\"getParams('level', item.value)\" v-for='item in levelData' :key=\"item.value\">\r\n\t\t\t\t\t\t\t{{item.label}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- 告警状态 -->\r\n\t\t\t\t\t<view class=\"grid-drawer-item\" v-show=\"activeObj.currentSearch == 2\">\r\n\t\t\t\t\t\t<view @click=\"getParams('status', item.value)\" v-for='item in statusData' :key=\"item.value\">\r\n\t\t\t\t\t\t\t{{item.label}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 列表框 -->\r\n\t\t<view class=\"list\">\r\n\r\n\t\t\t<list>\r\n\t\t\t\t<!-- 注意事项: 不能使用 index 作为 key 的唯一标识 -->\r\n\t\t\t\t<cell v-for=\"(item, index) in listData\" :key=\"index\">\r\n\t\t\t\t\t<view @click=\"goto(item )\" class=\"list-item\">\r\n\t\t\t\t\t\t<view class=\"list-title\">\r\n\t\t\t\t\t\t\t<view class=\"list-title-left\">\r\n\t\t\t\t\t\t\t\t<text>{{filterCategory(item.category)}}</text>\r\n\t\t\t\t\t\t\t\t<text>{{filterTime(item.verlayTime)}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"list-title-right\" :class=\"['status'+item.status]\">\r\n\t\t\t\t\t\t\t\t{{filterStatus(item.status)}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"list-content\">\r\n\t\t\t\t\t\t\t<view class=\"list-content-item\">\r\n\t\t\t\t\t\t\t\t<text class=\"list-content-label\">告警位置</text>\r\n\t\t\t\t\t\t\t\t<text class=\"list-content-value text-hide\">{{item.devOrgName}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"list-content-item\">\r\n\t\t\t\t\t\t\t\t<text class=\"list-content-label\">告警等级</text>\r\n\t\t\t\t\t\t\t\t<text :class=\"['level'+item.level]\"\r\n\t\t\t\t\t\t\t\t\tclass=\"list-content-value level1 text-hide\">{{filterLevel(item.level)}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"list-content-item\">\r\n\t\t\t\t\t\t\t\t<text class=\"list-content-label\">告警原因</text>\r\n\t\t\t\t\t\t\t\t<text class=\"list-content-value text-hide\">{{item.reason}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"list-footer\">\r\n\t\t\t\t\t\t\t查看详情\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t</cell>\r\n\t\t\t</list>\r\n\r\n\t\t</view>\r\n\r\n\t\t<view class=\"loadMore\">\r\n\t\t\t<uni-load-more v-show=\"showMoreObj.showMore\" :status=\"showMoreObj.status\"></uni-load-more>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport moment from 'moment';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tparams: {\r\n\t\t\t\t\tkeyword: '',\r\n\t\t\t\t\tlevel: '',\r\n\t\t\t\t\tstatus: '',\r\n\t\t\t\t\tcategory: '',\r\n\t\t\t\t\ttime: '',\r\n\t\t\t\t\tpageNo: 1,\r\n\t\t\t\t\tpageSize: 10\r\n\t\t\t\t},\r\n\t\t\t\tsearchObj: [{\r\n\t\t\t\t\ttext: '告警分类',\r\n\t\t\t\t\ton: '../../static/alarm/on.png',\r\n\t\t\t\t\toff: '../../static/alarm/off.png',\r\n\t\t\t\t\tstatus: false,\r\n\t\t\t\t\tactive: false,\r\n\t\t\t\t\tid: 'category',\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: '告警等级',\r\n\t\t\t\t\ton: '../../static/alarm/on.png',\r\n\t\t\t\t\toff: '../../static/alarm/off.png',\r\n\t\t\t\t\tstatus: false,\r\n\t\t\t\t\tactive: false,\r\n\t\t\t\t\tid: 'level'\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: '处理状态',\r\n\t\t\t\t\ton: '../../static/alarm/on.png',\r\n\t\t\t\t\toff: '../../static/alarm/off.png',\r\n\t\t\t\t\tstatus: false,\r\n\t\t\t\t\tactive: false,\r\n\t\t\t\t\tid: 'status'\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttext: '告警时间',\r\n\t\t\t\t\ton: '../../static/alarm/on.png',\r\n\t\t\t\t\toff: '../../static/alarm/off.png',\r\n\t\t\t\t\tstatus: false,\r\n\t\t\t\t\tactive: false,\r\n\t\t\t\t\tid: 'time'\r\n\t\t\t\t}],\r\n\t\t\t\tactiveObj: {\r\n\t\t\t\t\tcurrentSearch: -1, //当前选中的赛选数据\r\n\t\t\t\t\topen: false\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// 列表数据\r\n\t\t\t\tlistData: [],\r\n\t\t\t\t// 是否加载更多\r\n\t\t\t\tshowMoreObj: {\r\n\t\t\t\t\tshowMore: true,\r\n\t\t\t\t\tstatus: 'more'\r\n\t\t\t\t},\r\n\t\t\t\tendTime: Date.now(), //最大时间\r\n\t\t\t\tfirstAlarmId: '', //第一条告警id\r\n\t\t\t\ttimer: null\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 上拉刷新\r\n\t\tonPullDownRefresh() {\r\n\t\t\tthis.search('top');\r\n\t\t\tthis.showMoreObj.status = 'more';\r\n\t\t},\r\n\r\n\t\t// 触底加载\r\n\t\tonReachBottom() {\r\n\t\t\tif (this.showMoreObj.status == 'noMore') return;\r\n\t\t\tthis.search('bottom');\r\n\t\t},\r\n\r\n\t\tcreated() {\r\n\t\t\tthis.search('top');\r\n\t\t\tthis.getPolling();\r\n\t\t},\r\n\t\tdestroyed() {\r\n\t\t\tclearInterval(this.timer)\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\t\t\tstatusData() {\r\n\t\t\t\tlet data = [];\r\n\t\t\t\tfor (let key in this.$store.state.alarm.statusData) {\r\n\t\t\t\t\tdata.push({\r\n\t\t\t\t\t\tvalue: key,\r\n\t\t\t\t\t\tlabel: this.$store.state.alarm.statusData[key]\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\treturn data;\r\n\t\t\t},\r\n\t\t\tcategoryData() {\r\n\t\t\t\tlet data = [];\r\n\t\t\t\tfor (let key in this.$store.state.alarm.categoryData) {\r\n\t\t\t\t\tdata.push({\r\n\t\t\t\t\t\tvalue: key,\r\n\t\t\t\t\t\tlabel: this.$store.state.alarm.categoryData[key]\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\treturn data\r\n\t\t\t},\r\n\t\t\tlevelData() {\r\n\t\t\t\tlet data = [];\r\n\t\t\t\tfor (let key in this.$store.state.alarm.levelData) {\r\n\t\t\t\t\tdata.push({\r\n\t\t\t\t\t\tvalue: key,\r\n\t\t\t\t\t\tlabel: this.$store.state.alarm.levelData[key]\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\treturn data\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\t/**\r\n\t\t\t * 查询数据\r\n\t\t\t * top 表示刷新 bottom表示加载 \r\n\t\t\t */\r\n\t\t\tasync search(type = 'top') {\r\n\r\n\t\t\t\tif (type == 'top') {\r\n\t\t\t\t\tthis.params.pageNo = 1\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.params.pageNo += 1;\r\n\t\t\t\t\t// 增加一个五百毫秒的延时效果\r\n\t\t\t\t\tawait new Promise((resolve) => {\r\n\t\t\t\t\t\tthis.showMoreObj.status = 'loading';\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tresolve()\r\n\t\t\t\t\t\t}, 500)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet params = JSON.parse((JSON.stringify(this.params)));\r\n\t\t\t\t//\t处理时间\r\n\t\t\t\tif (params.time) {\r\n\t\t\t\t\tlet [startTime, endTime] = params.time;\r\n\t\t\t\t\tparams.startTime = new Date(startTime).getTime()\r\n\t\t\t\t\tparams.endTime = new Date(endTime).getTime()\r\n\t\t\t\t\tdelete params.time;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tawait this.$request('/v3/acs/alarm', params).then(res => {\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tdata\r\n\t\t\t\t\t} = res.data;\r\n\t\t\t\t\tif (type == 'top') {\r\n\t\t\t\t\t\tthis.listData = data;\r\n\t\t\t\t\t\tuni.stopPullDownRefresh();\r\n\t\t\t\t\t\tif (data.length == 0) this.showMoreObj.status = 'noMore';\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.listData = this.listData.concat(data || []);\r\n\t\t\t\t\t\tdata.length ? this.showMoreObj.status = 'more' : this.showMoreObj.status = 'noMore'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 轮询数据\r\n\t\t\tgetPolling() {\r\n\t\t\t\tif (this.timer) {\r\n\t\t\t\t\tclearInterval(this.timer)\r\n\t\t\t\t\tthis.timer = null\r\n\t\t\t\t}\r\n\t\t\t\tthis.timer = setInterval(() => {\r\n\t\t\t\t\tthis.$request('/v3/acs/alarm', {\r\n\t\t\t\t\t\tpageNo: 1,\r\n\t\t\t\t\t\tpageSize: 1\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tlet {\r\n\t\t\t\t\t\t\tdata\r\n\t\t\t\t\t\t} = res.data;\r\n\t\t\t\t\t\tif (!data.length && !this.firstAlarmId) return;\r\n\r\n\t\t\t\t\t\tif (data[0].id !== this.firstAlarmId) {\r\n\t\t\t\t\t\t\tthis.$utils.toast('告警已更新');\r\n\t\t\t\t\t\t\tthis.search('top');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.firstAlarmId = data[0].id;\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 10000)\r\n\t\t\t},\r\n\t\t\t// 点击赛选框\r\n\t\t\tchangeSearchObj(index) {\r\n\t\t\t\t// 时间点击单独处理\r\n\t\t\t\tif (index == 3) {\r\n\t\t\t\t\tthis.searchObj[3].status = !this.searchObj[3].status;\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.activeObj.currentSearch = index;\r\n\t\t\t\tlet isQuery = false; // 是否需要请求接口\r\n\r\n\t\t\t\tthis.searchObj.forEach((item, i) => {\r\n\t\t\t\t\tif (i == index) {\r\n\t\t\t\t\t\tif (item.active) {\r\n\t\t\t\t\t\t\t// 清除赛选条件\r\n\t\t\t\t\t\t\tthis.params[item.id] = '';\r\n\t\t\t\t\t\t\t// 取消高亮颜色\r\n\t\t\t\t\t\t\titem.active = false;\r\n\t\t\t\t\t\t\tisQuery = true\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\titem.status = !item.status;\r\n\t\t\t\t\t\tthis.activeObj.open = item.status;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\titem.status = false\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (isQuery) this.search('top')\r\n\t\t\t\tthis.$forceUpdate();\r\n\t\t\t},\r\n\t\t\t// 获取时间\r\n\t\t\tgetTime(val) {\r\n\t\t\t\tthis.params.time = val;\r\n\t\t\t\tthis.searchObj[3].active = true;\r\n\t\t\t\tthis.searchObj[3].status = true;\r\n\t\t\t\tthis.search('top')\r\n\t\t\t},\r\n\t\t\t// 清除时间\r\n\t\t\tclearTime() {\r\n\t\t\t\tthis.params.time = '';\r\n\t\t\t\tthis.searchObj[3].active = false;\r\n\t\t\t\tthis.search('top')\r\n\t\t\t},\r\n\r\n\t\t\t// 选择参数\r\n\t\t\tgetParams(type, value) {\r\n\t\t\t\tthis.params[type] = Number(value);\r\n\t\t\t\tthis.searchObj[this.activeObj.currentSearch].active = true;\r\n\t\t\t\tthis.searchObj[this.activeObj.currentSearch].status = false;\r\n\t\t\t\tthis.activeObj.open = false;\r\n\r\n\t\t\t\tthis.search('top');\r\n\r\n\t\t\t},\r\n\t\t\t// 跳转页面\r\n\t\t\tgoto(item) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/alarm/alarmInfo?id=' + item.id,\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 处理时间\r\n\t\t\tfilterTime(time) {\r\n\t\t\t\treturn moment(new Date(time)).format('YYYY-MM-DD HH:mm:ss')\r\n\t\t\t},\r\n\t\t\t// 处理分类\r\n\t\t\tfilterCategory(val) {\r\n\t\t\t\treturn this.$store.state.alarm.categoryData[val] || '—';\r\n\t\t\t},\r\n\t\t\t// 处理告警等级\r\n\t\t\tfilterLevel(val) {\r\n\t\t\t\treturn this.$store.state.alarm.levelData[val] || '—';\r\n\t\t\t},\r\n\t\t\t// 处理告警状态\r\n\t\t\tfilterStatus(val) {\r\n\t\t\t\treturn this.$store.state.alarm.statusData[val] || '—';\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.alarm {\r\n\t\t// overflow: hidden;\r\n\r\n\t\t.search {\r\n\t\t\theight: 230rpx;\r\n\t\t\tposition: fixed;\r\n\t\t\ttop: 0;\r\n\t\t\twidth: 100%;\r\n\r\n\t\t\t>view:first-child {\r\n\t\t\t\tbackground: $uni-bg-f5 !important;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t.grid-row {\r\n\t\t\t\tposition: relative;\r\n\r\n\t\t\t\t.uni-grid {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\twidth: 100%;\r\n\r\n\t\t\t\t\t.grid-box {\r\n\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\t\tpadding: 15px 0;\r\n\r\n\t\t\t\t\t\timage {\r\n\t\t\t\t\t\t\twidth: 22rpx;\r\n\t\t\t\t\t\t\theight: 22rpx;\r\n\t\t\t\t\t\t\tmargin-left: 10rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.active {\r\n\t\t\t\t\t\t.text {\r\n\t\t\t\t\t\t\tcolor: $uni-active-color !important;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.grid-drawer {\r\n\t\t\t\t\tposition: absolute;\r\n\t\t\t\t\ttop: 90rpx;\r\n\t\t\t\t\tleft: 0;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 0;\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\ttransition: all 0.3s;\r\n\t\t\t\t\toverflow: auto;\r\n\t\t\t\t\tbackground-color: #fff;\r\n\t\t\t\t\toverflow: hidden;\r\n\r\n\t\t\t\t\t.grid-drawer-item {\r\n\t\t\t\t\t\theight: 100%;\r\n\r\n\t\t\t\t\t\tview {\r\n\t\t\t\t\t\t\theight: 90rpx;\r\n\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\t\tpadding-left: 30rpx;\r\n\t\t\t\t\t\t\tfont-family: PingFang-SC-Medium;\r\n\t\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\t\tfont-weight: normal;\r\n\t\t\t\t\t\t\tfont-stretch: normal;\r\n\t\t\t\t\t\t\tline-height: 34.05rpx;\r\n\t\t\t\t\t\t\tletter-spacing: 0rpx;\r\n\t\t\t\t\t\t\tcolor: #333333;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.open {\r\n\t\t\t\t\theight: 400rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.list {\r\n\t\t\tmargin: 30rpx;\r\n\t\t\theight: auto;\r\n\t\t\toverflow: auto;\r\n\t\t\tpadding-top: 230rpx;\r\n\r\n\t\t\t.list-item {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 370rpx;\r\n\t\t\t\tbackground-color: #ffffff;\r\n\t\t\t\tborder-radius: 16rpx;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\toverflow: hidden;\r\n\r\n\t\t\t\t.list-title {\r\n\t\t\t\t\theight: 86rpx;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\tpadding: 0 32rpx;\r\n\t\t\t\t\tborder-bottom: solid 1rpx #eeeeee;\r\n\r\n\t\t\t\t\t.list-title-left,\r\n\t\t\t\t\t.list-title-right {\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t\t\ttext:first-child {\r\n\t\t\t\t\t\t\tfont-family: PingFang-SC-Medium;\r\n\t\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\t\tfont-weight: normal;\r\n\t\t\t\t\t\t\tfont-stretch: normal;\r\n\t\t\t\t\t\t\tline-height: 35.79rpx;\r\n\t\t\t\t\t\t\tletter-spacing: 0rpx;\r\n\t\t\t\t\t\t\tcolor: #333333;\r\n\t\t\t\t\t\t\tmargin-right: 10rpx;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttext:last-child {\r\n\t\t\t\t\t\t\tfont-family: PingFang-SC-Regular;\r\n\t\t\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\t\t\tfont-weight: normal;\r\n\t\t\t\t\t\t\tfont-stretch: normal;\r\n\t\t\t\t\t\t\tline-height: 35.79rpx;\r\n\t\t\t\t\t\t\tletter-spacing: 0rpx;\r\n\t\t\t\t\t\t\tcolor: #666666;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.list-title-right {\r\n\t\t\t\t\t\tfont-family: PingFang-SC-Regular;\r\n\t\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\t\tfont-weight: normal;\r\n\t\t\t\t\t\tfont-stretch: normal;\r\n\t\t\t\t\t\tline-height: 35.79rpx;\r\n\t\t\t\t\t\tletter-spacing: 0rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.list-content {\r\n\t\t\t\t\tpadding: 30rpx 30rpx 0 30rpx;\r\n\r\n\t\t\t\t\t.list-content-item {\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-wrap: nowrap;\r\n\t\t\t\t\t\tmargin-bottom: 25rpx;\r\n\r\n\t\t\t\t\t\t.list-content-label {\r\n\t\t\t\t\t\t\tfont-family: PingFang-SC-Medium;\r\n\t\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\t\tfont-weight: normal;\r\n\t\t\t\t\t\t\tfont-stretch: normal;\r\n\t\t\t\t\t\t\tline-height: 35.79rpx;\r\n\t\t\t\t\t\t\tletter-spacing: 0rpx;\r\n\t\t\t\t\t\t\tcolor: #999999;\r\n\t\t\t\t\t\t\tpadding-right: 30rpx;\r\n\t\t\t\t\t\t\twidth: 110rpx;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.list-content-value {\r\n\t\t\t\t\t\t\tfont-family: PingFang-SC-Medium;\r\n\t\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\t\tfont-weight: normal;\r\n\t\t\t\t\t\t\tfont-stretch: normal;\r\n\t\t\t\t\t\t\tline-height: 35.79rpx;\r\n\t\t\t\t\t\t\tletter-spacing: 0rpx;\r\n\t\t\t\t\t\t\tcolor: #333333;\r\n\t\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.list-footer {\r\n\t\t\t\t\tborder-top: solid 1rpx #eeeeee;\r\n\t\t\t\t\tfont-family: SourceHanSansCN-Regular;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tfont-weight: normal;\r\n\t\t\t\t\tfont-stretch: normal;\r\n\t\t\t\t\tletter-spacing: 0rpx;\r\n\t\t\t\t\tcolor: #306dfe;\r\n\t\t\t\t\theight: 70rpx;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.new-alarm {\r\n\t\t\t\t.list-title {\r\n\t\t\t\t\tbackground-color: #dd5b81;\r\n\r\n\t\t\t\t\ttext {\r\n\t\t\t\t\t\tcolor: #fff !important;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t.status0 {\r\n\t\tcolor: #f33649 !important;\r\n\t}\r\n\r\n\t.status1 {\r\n\t\tcolor: #28bd84 !important;\r\n\t}\r\n\r\n\t.status2 {\r\n\t\tcolor: #666666 !important;\r\n\t}\r\n\r\n\t.status3 {\r\n\t\tcolor: #f33649 !important;\r\n\t}\r\n\r\n\t.level1 {\r\n\t\tcolor: #cf2c25 !important;\r\n\t}\r\n\r\n\t.level2 {\r\n\t\tcolor: #f89600 !important;\r\n\t}\r\n\r\n\t.level3 {\r\n\t\tcolor: #ffc600 !important;\r\n\t}\r\n\r\n\t.level4 {\r\n\t\tcolor: #4483e3 !important;\r\n\t}\r\n\r\n\t.text-hide {\r\n\t\toverflow: hidden;\r\n\t\twhite-space: nowrap;\r\n\t\ttext-overflow: ellipsis;\r\n\t\tdisplay: inline-block;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./alarm.vue?vue&type=style&index=0&id=797937aa&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./alarm.vue?vue&type=style&index=0&id=797937aa&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1689571872796\n      var cssReload = require(\"E:/HBuilderX.3.1.18.20210609.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}